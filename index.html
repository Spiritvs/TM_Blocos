<!DOCTYPE html>
<html>
	<title>XtrmPixel</title>
	<head>
		<link href="style.css" rel="stylesheet" type="text/css" />
	</head>
	<body onload="init()">
		<canvas id="myCanvas" width="800" height="600"></canvas>
		<div id="texto" width="1000" height="30"></div>
	</body>
	<script>
		var larg = 25;
		var w = 800;
		var h = 600;
		var c = document.getElementById("myCanvas");
		window.addEventListener('keydown', keyP, false);

		var ctx = c.getContext("2d");

		function init() {
			addRect(0, 100, 100, 25, 25, "blue");
			addRect(1, 200, 200, 25, 25, "green");
			addRect(2, 300, 300, 25, 25, "red");
			//geraQuad();
		}

		var boxes = [];

		//Constructor
		function Box(id, x, y, w, h, fill) {
			this.id = id;
			this.x = x;
			this.y = y;
			this.w = w;
			this.h = h;
			this.fill = fill;
		}

		function addRect(id, x, y, w, h, fill) {
			var rect = new Box(id, x, y, w, h, fill);
			boxes.push(rect);
			geraQuad(x, y, w, h, fill);
		}

		function geraQuad(x, y, w, h, fill) {
			ctx.fillStyle = fill;
			ctx.fillRect(x, y, w, h);
		};

		function clearCanvas(x, y, w, h) {
			//c.width = c.width;
			ctx.clearRect(x, y, larg, larg);
		}

		function keyP(e) {
			//alert(e.keyCode);
			var aux = 0;
			if (e.keyCode == 83) {
				clearCanvas(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
				aux = boxes[0].y;
				boxes[0].y += larg;
				if (boxes[0].y >= h) {
					boxes[0].y = aux;
				}
				for (var i = 1; i <= 2; i++) {
					if (boxes[0].x == boxes[i].x && boxes[0].y == boxes[i].y) {
						boxes[0].y = aux;
					}
				}
				geraQuad(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
			};
			if (e.keyCode == 87) {
				clearCanvas(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
				aux = boxes[0].y;
				boxes[0].y -= larg;
				if (boxes[0].y < 0) {
					boxes[0].y = aux;
				}
				for (var i = 1; i <= 2; i++) {
					if (boxes[0].x == boxes[i].x && boxes[0].y == boxes[i].y) {
						boxes[0].y = aux;
					}
				}
				geraQuad(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
			};
			if (e.keyCode == 68) {
				clearCanvas(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
				aux = boxes[0].x;
				boxes[0].x += larg;
				if (boxes[0].x >= w) {
					boxes[0].x = aux;
				}
				for (var i = 1; i <= 2; i++) {
					if (boxes[0].x == boxes[i].x && boxes[0].y == boxes[i].y) {
						boxes[0].x = aux;
					}
				}
				geraQuad(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
			};
			if (e.keyCode == 65) {
				clearCanvas(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
				aux = boxes[0].x;
				boxes[0].x -= larg;
				if (boxes[0].x < 0) {
					boxes[0].x = aux;
				}
				for (var i = 1; i <= 2; i++) {
					if (boxes[0].x == boxes[i].x && boxes[0].y == boxes[i].y) {
						boxes[0].x = aux;
					}
				}
				geraQuad(boxes[0].x, boxes[0].y, boxes[0].w, boxes[0].h, boxes[0].fill);
			};
			//document.getElementById("texto").innerHTML = "X:" + x + " Y:" + y;
			document.getElementById("texto").innerHTML = boxes[0].id;
		};
	</script>
</html>
